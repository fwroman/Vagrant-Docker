FROM node:14

# CREA EL DIRECTORIO DE TRABAJO DENTRO DE LA IMAGEN DE DOCKER:
WORKDIR /fred-loopback4

# PARA INSTALAR TODAS LAS DEPENDENCIAS, SE COPIA LOS ARCHIVOS package UBICADO EN EL DIRECTORIO LOCAL CON UNA WILDCARD HACIA EL DIRECTORIO DE LA IMAGEN:
COPY ./loopback4-back/package*.json ./

# EJECUTANDO EL COMANDO npm install DENTRO DE LA IMAGEN DE DOCKER:
RUN npm install

# COPIANDO EL DIRECTORIO DEL PROYECTO ./loopback4-back EN EL WORKDIR . DEL PROYECTO EN LA IMAGEN DE DOCKER.
COPY ./loopback4-back ./

# EXPONE EL PUERTO SOBRE EL QUE ESTA FUNCIONANDO EL API DE LOOPBACK:
EXPOSE 3000

# DEFINE EL COMANDO POR DEFECTO PARA DESPLEGAR EL APP DENTRO DEL CONTENEDOR:
CMD [ "npm", "start" ]